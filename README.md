# üö¢ NauticAnnotator

Scan and extract single-boat LiDAR point clouds from rosbag streams using YOLO 2D detections, with optional PointPillars feature extraction and an offline viewer.

### ‚ú® Features
- 2D detection-assisted filtering of LiDAR point clouds (YOLO-based)
- Dataset builder that saves per-object point clouds and images
- Simple offline visualizer to inspect results

## 1) üß∞ Prerequisites
- Ubuntu + ROS (tested on typical catkin setups; source your ROS environment)
- Python 3 with numpy, OpenCV, matplotlib, rospkg
- GPU + PyTorch if using PointPillars feature extraction (CUDA required)

Example (Python deps):
```
pip install numpy opencv-python matplotlib rospkg
```

## 2) ‚öôÔ∏è Setup
```
git clone https://github.com/ldw200012/Boat_Scanner.git
cd Boat_Scanner
catkin_make
source devel/setup.bash   # or setup.zsh
```

## 3) üöÄ Quick Start
1. Play a rosbag that contains synchronized camera and LiDAR topics:
```
rosbag play YOUR_CAMERA_LIDAR.bag
```
2. Launch the annotator node:
```
roslaunch nautic_annotator nautic_annotator.launch
```

This will run the pipeline that fuses YOLO detections with LiDAR to isolate boat point clouds.

## 4) üóÇÔ∏è Offline Data Viewer
After collecting samples, visualize them:
```
rosrun nautic_annotator data_viewer.py
```
The viewer scans `nautic_annotator/data/object/*/` for:
- `pts_raw.bin` (float32 XYZ[I])
- `pts_xyz.bin` (cluster points)
- `img_det.png` (detection image)

It saves composites into `nautic_annotator/data/viewer/` as PNGs.

## 5) üõ†Ô∏è Tips & Troubleshooting
- Always `source devel/setup.bash` before running `roslaunch` or Python scripts that rely on ROS packages.
- If `rospack` cannot find a package, verify you built in the workspace root and sourced the workspace.
- For PointPillars CUDA ops: ensure GPU drivers, CUDA toolkit, and PyTorch versions are compatible.

## 6) üó∫Ô∏è Repository Layout (key parts)
```
Boat_Scanner/
  src/
    nautic_annotator/                    # ROS package for annotating/launch
      launch/nautic_annotator.launch
      scripts/data_viewer.py
      data/object/<id>/{pts_raw.bin, pts_xyz.bin, img_det.png}
      data/viewer/*.png                  # generated by data_viewer.py
```

---

If you run into issues, please open an issue with your ROS version, CUDA/PyTorch versions (if applicable), and a short log snippet.